<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>My Hakyll Blog - Static blog with hakyll</title>
        <link rel="stylesheet" href="../../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../../">My Hakyll Blog</a>
            </div>
            <nav>
                <a href="../../">Home</a>
                <a href="../../about.html">About</a>
                <a href="../../contact.html">Contact</a>
                <a href="../../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Static blog with hakyll</h1>
            <article>
    <section class="header">
        Posted on October  5, 2014
        
            by Janez Rom
        
    </section>
    <section>
        <h1 id="install-hakyll">Install hakyll</h1>
<pre><code>cabal install hakyll</code></pre>
<p>Initialise blog</p>
<pre><code>hakyll-init ~/blog/janezrom.github.io
cd  ~/blog/janezrom.github.io</code></pre>
<p>To compile with threaded and dynamic option, you must enable them before - see installing haskell.</p>
<pre><code>ghc --make -threaded -dynamic site.hs
./site build

./site watch</code></pre>
<p>and have a look at your site at http://localhost:8000/ or http://127.0.0.1:8000/</p>
<p>I store blog posts in separate directory linking them to hakyll blog.</p>
<pre><code>ln -s  ~/documents/posts/ /home/janez/blog/janezrom.github.io/posts</code></pre>
<p>In case of error message “Could not find module”Hakyll“”</p>
<pre><code>cabal install --reinstall --enable-shared hakyll</code></pre>
<p>In case of problem of compiling with dynamic/share haskell (had a problem with pandoc) then disable dynamic/shared when installing haskell programs.</p>
<h1 id="put-blog-on-github">Put blog on GitHub</h1>
<h2 id="initialize">Initialize</h2>
<p>Create github directory</p>
<pre><code>janezrom.github.io</code></pre>
<p>Initialize a git repository and set up synchronization with it’s github counterpart with</p>
<pre><code>cd ~/blog/janezrom.github.io/_site
git init
git add *.html # add css, etc.
git commit -m &quot;initial import&quot;
git remote add origin https://github.com/janezrom/janezrom.github.io.git
git push -u origin master</code></pre>
<h2 id="push-new-commit---check">Push new commit - check</h2>
<pre><code>git commit -a -m &quot;new commit&quot;
git push -u origin master</code></pre>
<h2 id="save-blog-source">Save blog source</h2>
<p>You must have created you blog directory. My is janezrom.github.io</p>
<p>Initialize a git repository and set up synchronization with it’s github counterpart with</p>
<pre><code>cd ~/blog/janezrom.github.io

git init</code></pre>
<p>Create .gitignore file and put in</p>
<pre><code>.git
.stack-work
_cache
_site
site
site.hi
site.o
stack.yaml.lock</code></pre>
<p>Continue</p>
<pre><code>git add *
git commit -m &quot;initial import&quot;
git remote add origin https://github.com/janezrom/janezrom.blog.source.git
git push -u origin master</code></pre>
<p>Push new commit - check</p>
<pre><code>git commit -a -m &quot;new commit&quot;
git push -u origin master</code></pre>
<h1 id="mathjax">MathJax</h1>
<p>Install mathjax</p>
<pre><code>pacman -S mathjax</code></pre>
<p>Modify site.hs file by adding on the top</p>
<pre><code>import qualified Data.Set as S
import           Text.Pandoc.Options</code></pre>
<p>and at the end</p>
<pre><code>pandocMathCompiler =
    let mathExtensions = [Ext_tex_math_dollars, Ext_tex_math_double_backslash,
                          Ext_latex_macros]
        defaultExtensions = writerExtensions defaultHakyllWriterOptions
        newExtensions = foldr S.insert defaultExtensions mathExtensions
        writerOptions = defaultHakyllWriterOptions {
                          writerExtensions = newExtensions,
                          writerHTMLMathMethod = MathJax &quot;&quot;
                        }
    in pandocCompilerWith defaultHakyllReaderOptions writerOptions</code></pre>
<p>Finaly replace all instances of pandocCompiler with pandocMathCompiler.</p>
<p>Add the following HTML to your default.html template to point users to Mathjax:</p>
<pre><code>&lt;script type=&quot;text/javascript&quot;
        src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&quot;&gt;&lt;/script&gt;</code></pre>
<h1 id="code-higlighting">Code higlighting</h1>
<p>Create file css/syntax.css with following content</p>
<pre><code>pre.sourceCode {
    background-color: #f8f8f8;
    border: 2px solid #ddd;
    padding: 6px 10px;
    border-radius: 5px;
    overflow-x: auto;
    font-size: 14px;
}

/* Generated by pandoc. */
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode, table.sourceCode pre
   {
       margin: 0;
       padding: 0;
       border: 0;
       vertical-align: baseline;
       border: none;
   }
td.lineNumbers {
    border-right: 1px solid #AAAAAA;
    text-align: right; color: #AAAAAA;
    padding-right: 5px;
    padding-left: 5px;
}
td.sourceCode { padding-left: 5px; }
.sourceCode span.kw { color: #007020; font-weight: bold; }
.sourceCode span.dt { color: #902000; }
.sourceCode span.dv { color: #40a070; }
.sourceCode span.bn { color: #40a070; }
.sourceCode span.fl { color: #40a070; }
.sourceCode span.ch { color: #4070a0; }
.sourceCode span.st { color: #4070a0; }
.sourceCode span.co { color: #60a0b0; font-style: italic; }
.sourceCode span.ot { color: #007020; }
.sourceCode span.al { color: red; font-weight: bold; }
.sourceCode span.fu { color: #06287e; }
.sourceCode span.re { }
.sourceCode span.er { color: red; font-weight: bold; }</code></pre>
<p>and add reference to him at head of file templates/default.html</p>
<pre><code>    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/syntax.css&quot; /&gt;</code></pre>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
